<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Todo</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:sans-serif}
.app{max-width:480px;margin:auto;padding:16px;background:#121212}
h2{font-size:18px;margin:16px 0 8px}

.card{background:#1e1e1e;border-radius:16px;padding:14px}

input{flex:1;padding:12px;border:none;border-radius:10px;background:#2a2a2a;color:#fff}
button{background:#1877f2;border:none;color:white;border-radius:10px;padding:12px}

ul{list-style:none;padding:0;margin:12px 0 0}
li{
background:#2a2a2a;margin-bottom:8px;padding:10px;border-radius:12px;
display:flex;justify-content:space-between;align-items:center;
cursor:grab;user-select:none
}

li.dragging{opacity:0.4}

.actions{display:flex;gap:4px;align-items:center}

.icon-btn{
background:#333;border:none;color:#fff;border-radius:8px;
padding:4px 8px;font-size:12px
}

.checkBox{
width:20px;height:20px;border:2px solid #555;border-radius:6px;
display:flex;align-items:center;justify-content:center;color:#4caf50
}
.checked{background:#123f1a;border-color:#4caf50}
.del-btn{color:#ff5f5f}
</style>
</head>

<body>
<div class="app">

<h2>ÏùºÏùº Ìï† Ïùº</h2>
<div class="card">
  <div style="display:flex;gap:8px;margin-bottom:12px">
    <input id="todoInput" placeholder="Ìï† Ïùº ÏûÖÎ†•"/>
    <button id="addBtn">+</button>
  </div>
  <ul id="todoList"></ul>
</div>

</div>

<script>
const listEl=document.getElementById("todoList");
const inputEl=document.getElementById("todoInput");

let todos=JSON.parse(localStorage.getItem("todos")||"[]");

function save(){
 localStorage.setItem("todos",JSON.stringify(todos));
}

function render(){
 listEl.innerHTML="";

 todos.forEach((t,i)=>{
  const li=document.createElement("li");
  li.draggable=true;

  const txt=document.createElement("span");
  txt.textContent=t.text;

  const actions=document.createElement("div");
  actions.className="actions";

  const box=document.createElement("div");
  box.className="checkBox";
  if(t.done){box.classList.add("checked");box.textContent="‚úì";}

  const up=document.createElement("button");
  up.textContent="‚ñ≤";
  up.className="icon-btn";
  up.onclick=(e)=>{
    e.stopPropagation();
    if(i===0)return;
    [todos[i-1],todos[i]]=[todos[i],todos[i-1]];
    save();render();
  };

  const down=document.createElement("button");
  down.textContent="‚ñº";
  down.className="icon-btn";
  down.onclick=(e)=>{
    e.stopPropagation();
    if(i===todos.length-1)return;
    [todos[i+1],todos[i]]=[todos[i],todos[i+1]];
    save();render();
  };

  const del=document.createElement("button");
  del.textContent="‚ùå";
  del.className="icon-btn del-btn";
  del.onclick=(e)=>{
    e.stopPropagation();
    if(!confirm("ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))return;
    todos.splice(i,1);
    save();render();
  };

  li.onclick=()=>{
    todos[i].done=!todos[i].done;
    save();render();
  };

  // üî• ÎìúÎûòÍ∑∏ Í∏∞Îä•
  li.addEventListener("dragstart",()=>{
    li.classList.add("dragging");
    li.dataset.index=i;
  });
  li.addEventListener("dragend",()=>{
    li.classList.remove("dragging");
  });
  li.addEventListener("dragover",(e)=>{
    e.preventDefault();
    const dragging=document.querySelector(".dragging");
    if(!dragging) return;
    const from=+dragging.dataset.index;
    const to=i;
    const item=todos.splice(from,1)[0];
    todos.splice(to,0,item);
    save();render();
  });

  actions.append(box,up,down,del);
  li.append(txt,actions);
  listEl.appendChild(li);
 });
}

document.getElementById("addBtn").onclick=()=>{
 const t=inputEl.value.trim();
 if(!t)return;
 todos.push({text:t,done:false});
 inputEl.value="";
 save();render();
};

render();
</script>
</body>
</html>
