<script>
  const listEl = document.getElementById("list");
  const inputEl = document.getElementById("input");

  // 저장된 데이터 불러오기
  let todos = JSON.parse(localStorage.getItem("todos")) || [];

  function saveTodos() {
    localStorage.setItem("todos", JSON.stringify(todos));
  }

  function renderTodos() {
    listEl.innerHTML = "";
    todos.forEach((todo, index) => {
      const li = document.createElement("li");

      const span = document.createElement("span");
      span.textContent = todo.text;
      if (todo.done) span.classList.add("done");

      span.onclick = () => {
        todos[index].done = !todos[index].done;
        saveTodos();
        renderTodos();
      };

      const btn = document.createElement("button");
      btn.textContent = "삭제";
      btn.onclick = () => {
        todos.splice(index, 1);
        saveTodos();
        renderTodos();
      };

      li.append(span, btn);
      listEl.appendChild(li);
    });
  }

  function addTodo() {
    const text = inputEl.value.trim();
    if (!text) return;
    todos.push({ text, done: false });
    inputEl.value = "";
    saveTodos();
    renderTodos();
  }

  // 페이지 열릴 때 자동 실행
  renderTodos();
</script>
